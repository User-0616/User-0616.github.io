(function(){var t={4429:function(t,e,n){"use strict";n(4341);var r=n(1387),a=(n(3975),n(1412)),i=(n(7057),n(1911)),s=(n(4663),n(338)),o=(n(9497),n(7384)),u=(n(6624),n(8235)),c=(n(2943),n(7735)),l=(n(9735),n(520)),d=(n(6283),n(1197)),f=(n(4112),n(5263)),p=(n(5758),n(976)),m=(n(6992),n(8674),n(9601),n(7727),n(8935)),h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("router-view")],1)},v=[],g={name:"App"},y=g,w=n(1001),b=(0,w.Z)(y,h,v,!1,null,null,null),Z=b.exports,_=(n(6801),n(2809)),x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{attrs:{title:t.activeTitle,fixed:""}}),n("div",{staticClass:"main"},[n("router-view")],1),n("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[n("van-tabbar-item",{attrs:{replace:"",to:"/layout/home",icon:"home-o"}},[t._v("首页")]),n("van-tabbar-item",{attrs:{replace:"",to:"/layout/search",icon:"search"}},[t._v("搜索")])],1)],1)},L=[],k={data:function(){return{active:0,activeTitle:this.$route.meta.title}},watch:{$route:function(){this.activeTitle=this.$route.meta.title}}},C=k,S=(0,w.Z)(C,x,L,!1,null,"2367573f",null),$=S.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"title"},[t._v("推荐歌单")]),n("van-row",{attrs:{gutter:"6"}},t._l(t.reList,(function(e){return n("van-col",{key:e.id,attrs:{span:"8"}},[n("van-image",{attrs:{width:"100%",height:"3rem",fit:"cover",src:e.picUrl}}),n("p",{staticClass:"song_name"},[t._v(t._s(e.name))])],1)})),1),n("p",{staticClass:"title"},[t._v("最新音乐")]),t._l(t.songList,(function(t){return n("SongItem",{key:t.id,attrs:{name:t.name,auther:t.song.artists[0].name,id:t.id}})}))],2)},E=[],I=n(6198),O=(n(8975),n(6166)),T=n.n(O);T().defaults.baseURL="https://netease-cloud-music-api-eight-alpha-75.vercel.app/";var F=T(),z=function(t){return F({url:"/personalized",params:t})},j=function(t){return F({url:"/personalized/newsong",params:t})},q=function(t){return F({url:"/search/hot",params:t})},A=function(t){return F({url:"/cloudsearch",params:t})},U=function(t){return F({url:"/song/detail?ids=".concat(t),method:"GET"})},D=function(t){return F({url:"/lyric?id=".concat(t),method:"GET"})},M=z,N=j,P=q,G=A,V=U,H=D,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("van-cell",{key:t.id,attrs:{center:"",title:t.name,label:t.auther+" - "+t.name},scopedSlots:t._u([{key:"right-icon",fn:function(){return[n("van-icon",{attrs:{name:"play-circle-o",size:"0.7rem"},on:{click:t.playFn}})]},proxy:!0}])})},B=[],J=(n(9653),{name:"SongItem",props:{name:String,auther:String,id:Number},methods:{playFn:function(){this.$router.push({path:"/play",query:{id:this.id}})}}}),K=J,Q=(0,w.Z)(K,W,B,!1,null,"878316b2",null),X=Q.exports,Y={components:{SongItem:X},data:function(){return{reList:[],songList:[]}},created:function(){var t=this;return(0,I.Z)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M({limit:6});case 2:return n=e.sent,t.reList=n.data.result,e.next=6,N({limit:20});case 6:r=e.sent,console.log(r),t.songList=r.data.result;case 9:case"end":return e.stop()}}),e)})))()}},tt=Y,et=(0,w.Z)(tt,R,E,!1,null,"1b330260",null),nt=et.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-search",{attrs:{shape:"round",placeholder:"请输入搜索关键词"},on:{search:function(e){return t.fn(t.value)},input:t.inputFn},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),0===t.resultList.length?n("div",{staticClass:"search_wrap"},[n("p",{staticClass:"hot_title"},[t._v("热门搜索")]),n("div",{staticClass:"hot_name_wrap"},t._l(t.hotArr,(function(e,r){return n("span",{key:r,staticClass:"hot_item",on:{click:function(n){return t.fn(e.first)}}},[t._v(" "+t._s(e.first))])})),0)]):n("div",{staticClass:"search_wrap"},[n("p",{staticClass:"hot_title"},[t._v("最佳匹配")]),n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.resultList,(function(t){return n("song-item",{key:t.id,attrs:{auther:t.ar[0].name,name:t.name,id:t.id}})})),1)],1)],1)},at=[],it=n(4479),st=(n(3210),n(2222),{components:{SongItem:X},data:function(){return{list:[],loading:!1,finished:!1,value:"",hotArr:[],resultList:[],pages:1,timer:null}},created:function(){var t=this;return(0,I.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:n=e.sent,console.log(n),t.hotArr=n.data.result.hots;case 5:case"end":return e.stop()}}),e)})))()},methods:{getListFn:function(){var t=this;return(0,I.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G({keywords:t.value,limit:20,offset:20*(t.pages-1)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()},fn:function(t){var e=this;return(0,I.Z)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.pages=1,e.finished=!1,e.value=t,n.next=5,e.getListFn();case 5:r=n.sent,console.log(r),void 0===r.data.result.songs&&alert("没有这首歌"),e.resultList=r.data.result.songs,e.loading=!1;case 10:case"end":return n.stop()}}),n)})))()},inputFn:function(){var t=this;return(0,I.Z)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.pages=1,t.timer&&clearTimeout(t.timer),t.timer=setTimeout((0,I.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.finished=!1,0!==t.value.trim().length){e.next=4;break}return t.resultList=[],e.abrupt("return");case 4:return e.next=6,t.getListFn();case 6:if(n=e.sent,console.log(n),void 0!==n.data.result.songs){e.next=11;break}return t.resultList=[],e.abrupt("return");case 11:t.resultList=n.data.result.songs,t.loading=!1;case 13:case"end":return e.stop()}}),e)}))),900);case 3:case"end":return e.stop()}}),e)})))()},onLoad:function(){var t=this;return(0,I.Z)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.pages++,e.next=3,t.getListFn();case 3:if(n=e.sent,void 0!==n.data.result.songs){e.next=8;break}return t.finished=!0,t.loading=!1,e.abrupt("return");case 8:t.resultList=[].concat((0,it.Z)(t.resultList),(0,it.Z)(n.data.result.songs)),t.loading=!1;case 10:case"end":return e.stop()}}),e)})))()}}}),ot=st,ut=(0,w.Z)(ot,rt,at,!1,null,"37b1e32c",null),ct=ut.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"play"},[n("div",{staticClass:"song-bg",style:"background-image: url("+(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0);"}),n("div",{staticClass:"header"},[n("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(e){return t.$router.back()}}})],1),n("div",{staticClass:"song-wrapper"},[n("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[n("div",{staticClass:"song-img"},[n("img",{staticStyle:{width:"100%"},attrs:{src:(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0",alt:""}})])]),n("div",{staticClass:"start-box",on:{click:t.audioStart}},[n("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),n("div",{staticClass:"song-msg"},[n("h2",{staticClass:"m-song-h2"},[n("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),n("div",{staticClass:"lrcContent"},[n("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),n("div",{staticClass:"needle",style:"transform: rotate("+t.needleDeg+");"})]),n("audio",{ref:"audio",attrs:{id:"media",controls:"",muted:"",preload:"true",loop:"loop",src:"https://music.163.com/song/media/outer/url?id="+t.id+".mp3"}})])},dt=[],ft=n(3796),pt=(n(8309),n(4916),n(4723),n(7042),n(3123),n(1539),n(4747),{components:(0,ft.Z)({},i.Z.name,i.Z),name:"play",data:function(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg:function(){return this.playState?"-7deg":"-38deg"}},methods:{getSong:function(){var t=this;return(0,I.Z)(regeneratorRuntime.mark((function e(){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,V(t.id);case 2:return n=e.sent,t.songInfo=n.data.songs[0],e.next=6,H(t.id);case 6:r=e.sent,a=r.data.lrc.lyric,t.lyric=t._formatLyr(a),t.curLyric=t.lyric[0];case 10:case"end":return e.stop()}}),e)})))()},_formatLyr:function(t){var e=/\[.+?\]/g,n=t.match(e);console.log(n);var r=t.split(/\[.+?\]/).slice(1);console.log(r);var a={};return n.forEach((function(t,e){var n=60*t.split(":")[0].split("")[2],i="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];a[n+Number(i)]=r[e]})),console.log(a),a},audioStart:function(){this.playState?this.$refs.audio.pause():(this.$refs.audio.load(),this.$refs.audio.play()),this.playState=!this.playState},showLyric:function(){var t=this;this.$refs.audio.addEventListener("timeupdate",(function(){var e=Math.floor(t.$refs.audio.currentTime);t.lyric[e]?(t.curLyric=t.lyric[e],t.lastLy=t.curLyric):t.curLyric=t.lastLy}))}},mounted:function(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}}),mt=pt,ht=(0,w.Z)(mt,lt,dt,!1,null,"ab3869c6",null),vt=ht.exports;m.Z.use(_.Z);var gt=[{path:"/",redirect:"/layout"},{path:"/layout",component:$,redirect:"/layout/home",children:[{path:"home",component:nt,meta:{title:"首页"}},{path:"search",component:ct,meta:{title:"搜索"}}]},{path:"/play",component:vt}],yt=new _.Z({routes:gt}),wt=yt;m.Z.use(p.Z),m.Z.use(f.Z),m.Z.use(d.Z),m.Z.use(l.Z),m.Z.use(c.Z),m.Z.use(u.Z),m.Z.use(o.Z),m.Z.use(s.Z),m.Z.use(i.Z),m.Z.use(a.Z),m.Z.use(r.Z),m.Z.config.productionTip=!1,new m.Z({router:wt,render:function(t){return t(Z)}}).$mount("#app")},6801:function(){(function(t,e){var n=e.documentElement,r=t.devicePixelRatio||1;function a(){e.body?e.body.style.fontSize=12*r+"px":e.addEventListener("DOMContentLoaded",a)}function i(){var t=n.clientWidth/10;n.style.fontSize=t+"px"}if(a(),i(),t.addEventListener("resize",i),t.addEventListener("pageshow",(function(t){t.persisted&&i()})),r>=2){var s=e.createElement("body"),o=e.createElement("div");o.style.border=".5px solid transparent",s.appendChild(o),n.appendChild(s),1===o.offsetHeight&&n.classList.add("hairlines"),n.removeChild(s)}})(window,document)}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r](i,i.exports,n),i.loaded=!0,i.exports}n.m=t,function(){var t=[];n.O=function(e,r,a,i){if(!r){var s=1/0;for(l=0;l<t.length;l++){r=t[l][0],a=t[l][1],i=t[l][2];for(var o=!0,u=0;u<r.length;u++)(!1&i||s>=i)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(o=!1,i<s&&(s=i));if(o){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var l=t.length;l>0&&t[l-1][2]>i;l--)t[l]=t[l-1];t[l]=[r,a,i]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,i,s=r[0],o=r[1],u=r[2],c=0;if(s.some((function(e){return 0!==t[e]}))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(u)var l=u(n)}for(e&&e(r);c<s.length;c++)i=s[c],n.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return n.O(l)},r=self["webpackChunkmusic_demo"]=self["webpackChunkmusic_demo"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=n.O(void 0,[998],(function(){return n(4429)}));r=n.O(r)})();
//# sourceMappingURL=app-legacy.8e65133e.js.map