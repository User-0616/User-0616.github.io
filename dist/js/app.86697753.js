(function(){var t={7509:function(t,e,s){"use strict";s(4341);var i=s(1387),a=(s(3975),s(1412)),n=(s(7057),s(1911)),r=(s(4663),s(338)),o=(s(9497),s(7384)),l=(s(6624),s(8235)),c=(s(2943),s(7735)),u=(s(9735),s(520)),d=(s(6283),s(1197)),h=(s(4112),s(5263)),p=(s(5758),s(976)),f=s(8935),m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("router-view")],1)},v=[],g={name:"App"},y=g,_=s(1001),w=(0,_.Z)(y,m,v,!1,null,null,null),b=w.exports,L=(s(6801),s(2809)),Z=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{attrs:{title:t.activeTitle,fixed:""}}),s("div",{staticClass:"main"},[s("router-view")],1),s("van-tabbar",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("van-tabbar-item",{attrs:{replace:"",to:"/layout/home",icon:"home-o"}},[t._v("首页")]),s("van-tabbar-item",{attrs:{replace:"",to:"/layout/search",icon:"search"}},[t._v("搜索")])],1)],1)},C=[],x={data(){return{active:0,activeTitle:this.$route.meta.title}},watch:{$route(){this.activeTitle=this.$route.meta.title}}},S=x,k=(0,_.Z)(S,Z,C,!1,null,"2367573f",null),$=k.exports,E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("p",{staticClass:"title"},[t._v("推荐歌单")]),s("van-row",{attrs:{gutter:"6"}},t._l(t.reList,(function(e){return s("van-col",{key:e.id,attrs:{span:"8"}},[s("van-image",{attrs:{width:"100%",height:"3rem",fit:"cover",src:e.picUrl}}),s("p",{staticClass:"song_name"},[t._v(t._s(e.name))])],1)})),1),s("p",{staticClass:"title"},[t._v("最新音乐")]),t._l(t.songList,(function(t){return s("SongItem",{key:t.id,attrs:{name:t.name,auther:t.song.artists[0].name,id:t.id}})}))],2)},I=[],O=s(6166),T=s.n(O);T().defaults.baseURL="https://netease-cloud-music-api-eight-alpha-75.vercel.app/";var F=T();const z=t=>F({url:"/personalized",params:t}),j=t=>F({url:"/personalized/newsong",params:t}),q=t=>F({url:"/search/hot",params:t}),A=t=>F({url:"/cloudsearch",params:t}),U=t=>F({url:`/song/detail?ids=${t}`,method:"GET"}),D=t=>F({url:`/lyric?id=${t}`,method:"GET"}),M=z,N=j,P=q,G=A,R=U,V=D;var H=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-cell",{key:t.id,attrs:{center:"",title:t.name,label:t.auther+" - "+t.name},scopedSlots:t._u([{key:"right-icon",fn:function(){return[s("van-icon",{attrs:{name:"play-circle-o",size:"0.7rem"},on:{click:t.playFn}})]},proxy:!0}])})},W=[],B={name:"SongItem",props:{name:String,auther:String,id:Number},methods:{playFn(){this.$router.push({path:"/play",query:{id:this.id}})}}},J=B,K=(0,_.Z)(J,H,W,!1,null,"878316b2",null),Q=K.exports,X={components:{SongItem:Q},data(){return{reList:[],songList:[]}},async created(){const t=await M({limit:6});this.reList=t.data.result;const e=await N({limit:20});console.log(e),this.songList=e.data.result}},Y=X,tt=(0,_.Z)(Y,E,I,!1,null,"1b330260",null),et=tt.exports,st=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-search",{attrs:{shape:"round",placeholder:"请输入搜索关键词"},on:{search:function(e){return t.fn(t.value)},input:t.inputFn},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),0===t.resultList.length?s("div",{staticClass:"search_wrap"},[s("p",{staticClass:"hot_title"},[t._v("热门搜索")]),s("div",{staticClass:"hot_name_wrap"},t._l(t.hotArr,(function(e,i){return s("span",{key:i,staticClass:"hot_item",on:{click:function(s){return t.fn(e.first)}}},[t._v(" "+t._s(e.first))])})),0)]):s("div",{staticClass:"search_wrap"},[s("p",{staticClass:"hot_title"},[t._v("最佳匹配")]),s("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.resultList,(function(t){return s("song-item",{key:t.id,attrs:{auther:t.ar[0].name,name:t.name,id:t.id}})})),1)],1)],1)},it=[],at={components:{SongItem:Q},data(){return{list:[],loading:!1,finished:!1,value:"",hotArr:[],resultList:[],pages:1,timer:null}},async created(){const t=await P();console.log(t),this.hotArr=t.data.result.hots},methods:{async getListFn(){return await G({keywords:this.value,limit:20,offset:20*(this.pages-1)})},async fn(t){this.pages=1,this.finished=!1,this.value=t;const e=await this.getListFn();console.log(e),void 0===e.data.result.songs&&alert("没有这首歌"),this.resultList=e.data.result.songs,this.loading=!1},async inputFn(){this.pages=1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((async()=>{if(this.finished=!1,0===this.value.trim().length)return void(this.resultList=[]);const t=await this.getListFn();console.log(t),void 0!==t.data.result.songs?(this.resultList=t.data.result.songs,this.loading=!1):this.resultList=[]}),900)},async onLoad(){this.pages++;const t=await this.getListFn();if(void 0===t.data.result.songs)return this.finished=!0,void(this.loading=!1);this.resultList=[...this.resultList,...t.data.result.songs],this.loading=!1}}},nt=at,rt=(0,_.Z)(nt,st,it,!1,null,"37b1e32c",null),ot=rt.exports,lt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play"},[s("div",{staticClass:"song-bg",style:"background-image: url("+(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0);"}),s("div",{staticClass:"header"},[s("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(e){return t.$router.back()}}})],1),s("div",{staticClass:"song-wrapper"},[s("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[s("div",{staticClass:"song-img"},[s("img",{staticStyle:{width:"100%"},attrs:{src:(t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl)+"?imageView&thumbnail=360y360&quality=75&tostatic=0",alt:""}})])]),s("div",{staticClass:"start-box",on:{click:t.audioStart}},[s("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),s("div",{staticClass:"song-msg"},[s("h2",{staticClass:"m-song-h2"},[s("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),s("div",{staticClass:"lrcContent"},[s("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),s("div",{staticClass:"needle",style:"transform: rotate("+t.needleDeg+");"})]),s("Audio",{ref:"audio",attrs:{muted:"",preload:"true",src:"https://music.163.com/song/media/outer/url?id="+t.id+".mp3"}})],1)},ct=[],ut={components:{[n.Z.name]:n.Z},name:"play",data(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg(){return this.playState?"-7deg":"-38deg"}},methods:{async getSong(){const t=await R(this.id);this.songInfo=t.data.songs[0];const e=await V(this.id),s=e.data.lrc.lyric;this.lyric=this._formatLyr(s),this.curLyric=this.lyric[0]},_formatLyr(t){let e=/\[.+?\]/g,s=t.match(e);console.log(s);let i=t.split(/\[.+?\]/).slice(1);console.log(i);let a={};return s.forEach(((t,e)=>{let s=60*t.split(":")[0].split("")[2],n="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];a[s+Number(n)]=i[e]})),console.log(a),a},audioStart(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric(){this.$refs.audio.addEventListener("timeupdate",(()=>{let t=Math.floor(this.$refs.audio.currentTime);this.lyric[t]?(this.curLyric=this.lyric[t],this.lastLy=this.curLyric):this.curLyric=this.lastLy}))}},mounted(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}},dt=ut,ht=(0,_.Z)(dt,lt,ct,!1,null,"0aba8615",null),pt=ht.exports;f.Z.use(L.Z);const ft=[{path:"/",redirect:"/layout"},{path:"/layout",component:$,redirect:"/layout/home",children:[{path:"home",component:et,meta:{title:"首页"}},{path:"search",component:ot,meta:{title:"搜索"}}]},{path:"/play",component:pt}],mt=new L.Z({routes:ft});var vt=mt;f.Z.use(p.Z),f.Z.use(h.Z),f.Z.use(d.Z),f.Z.use(u.Z),f.Z.use(c.Z),f.Z.use(l.Z),f.Z.use(o.Z),f.Z.use(r.Z),f.Z.use(n.Z),f.Z.use(a.Z),f.Z.use(i.Z),f.Z.config.productionTip=!1,new f.Z({router:vt,render:t=>t(b)}).$mount("#app")},6801:function(){(function(t,e){var s=e.documentElement,i=t.devicePixelRatio||1;function a(){e.body?e.body.style.fontSize=12*i+"px":e.addEventListener("DOMContentLoaded",a)}function n(){var t=s.clientWidth/10;s.style.fontSize=t+"px"}if(a(),n(),t.addEventListener("resize",n),t.addEventListener("pageshow",(function(t){t.persisted&&n()})),i>=2){var r=e.createElement("body"),o=e.createElement("div");o.style.border=".5px solid transparent",r.appendChild(o),s.appendChild(r),1===o.offsetHeight&&s.classList.add("hairlines"),s.removeChild(r)}})(window,document)}},e={};function s(i){var a=e[i];if(void 0!==a)return a.exports;var n=e[i]={exports:{}};return t[i](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,i,a,n){if(!i){var r=1/0;for(u=0;u<t.length;u++){i=t[u][0],a=t[u][1],n=t[u][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||r>=n)&&Object.keys(s.O).every((function(t){return s.O[t](i[l])}))?i.splice(l--,1):(o=!1,n<r&&(r=n));if(o){t.splice(u--,1);var c=a();void 0!==c&&(e=c)}}return e}n=n||0;for(var u=t.length;u>0&&t[u-1][2]>n;u--)t[u]=t[u-1];t[u]=[i,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,n,r=i[0],o=i[1],l=i[2],c=0;if(r.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var u=l(s)}for(e&&e(i);c<r.length;c++)n=r[c],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(u)},i=self["webpackChunkmusic_demo"]=self["webpackChunkmusic_demo"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(7509)}));i=s.O(i)})();
//# sourceMappingURL=app.86697753.js.map